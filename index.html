<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🧮 Algebra Division Game</title>
<style>
body { font-family:'Comic Sans MS', cursive,sans-serif; margin:0;padding:0; background:linear-gradient(135deg,#fff3e0,#ffe0b2); text-align:center; }
h1 { background:#ff9800; color:white; padding:14px; margin:0; font-size:24px; }
#game-container { margin:15px auto; width:95%; max-width:950px; background:white; padding:15px; border-radius:12px; box-shadow:0 3px 6px rgba(0,0,0,0.2); display:flex; justify-content:space-between; gap:15px; }
#left-side { flex:2; }
#side-panel { flex:0 0 auto; max-width:240px; }
.panel-box { background:#fff3e0; padding:12px; border-radius:10px; border:1px solid #ffb74d; text-align:left; font-size:14px; line-height:1.5; display:none; margin-bottom:10px; }
.panel-box h3 { font-size:15px; margin:0 0 8px 0; text-align:center; }
.operation-btn { display:inline-block; padding:6px 10px; margin:3px; font-size:14px; background:#ffb74d; color:white; border-radius:6px; cursor:pointer; border:1px solid #ff9800; }
.operation-btn:hover { background:#ffa726; }
#question-box { font-size:20px; margin:20px 0; font-weight:bold; min-height:24px; }
input, button { padding:8px 12px; margin:4px; font-size:15px; border-radius:6px; border:1px solid #ccc; }
button { background:#ff9800; color:white; cursor:pointer; }
button:hover { background:#fb8c00; }
#feedback { font-size:16px; margin-top:8px; font-weight:bold; min-height:22px; }
canvas { width:100%; max-width:550px; height:300px; background:#fff8e1; border-radius:8px; border:1px solid #ccc; }
@media (max-width:700px) { #game-container { flex-direction:column; align-items:center; } #side-panel { width:100%; max-width:340px; text-align:center; }
</style>
</head>
<body>
<h1>🧮 Algebra Division Game</h1>
<div id="game-container">
  <div id="left-side">
    <div id="question-box"></div>
    <div>
      <label for="answer">Answer:</label>
      <input type="text" id="answer" placeholder="e.g., 2x+3">
      <button id="submitBtn">✔ Submit</button>
      <button id="newQuestionBtn">⟳ New Question</button>
      <button id="toggleHintsBtn">💡 Hints</button>
      <button id="toggleOpsBtn">⚙️ Operations</button>
    </div>
    <div id="feedback"></div>
    <canvas id="gameCanvas"></canvas>
  </div>
  <div id="side-panel">
    <div id="hints" class="panel-box">
      <h3>📝 Hints</h3>
      <p>👉 Divide coefficients separately (6x ÷ 3 = 2x)</p>
      <p>👉 Divide powers of same variable (x² ÷ x = x)</p>
      <p>👉 Simplify fractions if needed</p>
      <p>👉 Combine like terms if present</p>
    </div>
    <div id="operations" class="panel-box">
      <h3>⚙️ Operations</h3>
      <div id="ops-container"></div>
    </div>
  </div>
</div>
<audio id="applause" src="https://www.soundjay.com/human/applause-01.mp3" preload="auto"></audio>

<script>
document.addEventListener("DOMContentLoaded", function(){

  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");
  canvas.width = 550; canvas.height = 300;

  const questions = [
    { q: "(6x + 9) ÷ 3", a: ["2x+3"] },
    { q: "(x² + 5x) ÷ x", a: ["x+5"] },
    { q: "(4y² - 8y) ÷ 4y", a: ["y-2"] },
    { q: "(a² + 6a + 9) ÷ (a+3)", a: ["a+3"] },
    { q: "(2m² + 8m) ÷ 2m", a: ["m+4"] },
    { q: "(x² - 16) ÷ (x-4)", a: ["x+4"] },
    { q: "(3p² - 12p) ÷ 3p", a: ["p-4"] },
    { q: "(y² + 10y + 25) ÷ (y+5)", a: ["y+5"] }
  ];

  let currentQuestion = "", correctAnswers = [], particles=[];

  // Generate operation buttons
  const operationsList = ["+", "-", "*", "/", "(", ")", "^2", "x", "y", "a", "m", "p"];
  const opsContainer = document.getElementById("ops-container");
  operationsList.forEach(op=>{
    const btn = document.createElement("div");
    btn.className="operation-btn";
    btn.textContent=op;
    btn.onclick=()=>{document.getElementById("answer").value += op; document.getElementById("answer").focus();};
    opsContainer.appendChild(btn);
  });

  // Panel toggles
  document.getElementById("toggleHintsBtn").onclick=()=>togglePanel("hints");
  document.getElementById("toggleOpsBtn").onclick=()=>togglePanel("operations");
  function togglePanel(id){ const el=document.getElementById(id); el.style.display=(el.style.display==="block")?"none":"block"; }

  // New question
  function newQuestion(){
    const item = questions[Math.floor(Math.random()*questions.length)];
    currentQuestion = item.q;
    correctAnswers = item.a.map(ans=>ans.replace(/\s+/g,""));
    document.getElementById("question-box").textContent = `🎯 Simplify: ${currentQuestion}`;
    document.getElementById("feedback").textContent = "";
    document.getElementById("answer").value = "";
    ctx.clearRect(0,0,canvas.width,canvas.height);
  }

  // Check answer
  function checkAnswer(){
    const input = document.getElementById("answer").value.trim().replace(/\s+/g,"");
    const feedback = document.getElementById("feedback");
    const positive=["🎉 Awesome! Correct! 🔥","✅ Perfect! 🌟","👏 Great job!"];
    const negative=["❌ Try again! 💡","⚠️ Not quite!","😅 Almost!"];
    if(correctAnswers.includes(input)){
      feedback.style.color="green";
      feedback.textContent=positive[Math.floor(Math.random()*positive.length)];
      playApplause(); launchFireworks();
      setTimeout(newQuestion,3000);
    } else {
      feedback.style.color="red";
      feedback.textContent=negative[Math.floor(Math.random()*negative.length)] + ` Correct: ${correctAnswers[0]}`;
    }
  }

  // Event listeners
  document.getElementById("newQuestionBtn").onclick=newQuestion;
  document.getElementById("submitBtn").onclick=checkAnswer;
  document.getElementById("answer").addEventListener("keypress",e=>{if(e.key==="Enter") checkAnswer();});

  // Fireworks
  function playApplause(){ const applause=document.getElementById("applause"); applause.currentTime=0; applause.play();}
  function launchFireworks(){
    for(let i=0;i<80;i++){ particles.push({x:canvas.width/2,y:canvas.height/2,angle:Math.random()*2*Math.PI,speed:Math.random()*5+2,radius:Math.random()*3+2,life:100}); }
    animateFireworks();
  }
  function animateFireworks(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{
      let dx=Math.cos(p.angle)*p.speed; let dy=Math.sin(p.angle)*p.speed;
      p.x+=dx; p.y+=dy; p.life-=2;
      ctx.beginPath(); ctx.arc(p.x,p.y,p.radius,0,Math.PI*2);
      ctx.fillStyle=`rgba(${Math.random()*255},${Math.random()*255},${Math.random()*255},${p.life/100})`; ctx.fill();
    });
    particles = particles.filter(p=>p.life>0);
    if(particles.length>0) requestAnimationFrame(animateFireworks);
  }

  // Initial question
  newQuestion();

});
</script>
</body>
</html>

